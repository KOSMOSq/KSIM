
## Комп'ютерні системи імітаційного моделювання

## СПм-24-3, Лавровський Максим Валерійович

### Лабораторна робота №2. Редагування імітаційних моделей у середовищі NetLogo

### Варіант 9, модель у середовищі NetLogo:

[Shepherds](https://www.netlogoweb.org/launch#https://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Shepherds.nlogox)

### Внесені зміни у вихідну логіку моделі

### 1. Поділ на організації та правила збору овець

Реалізовано поділ овець та пастухів на дві протиборчі організації (команди) за допомогою змінної `team` (`0` - Червона, `1` - Синя).

#### Ініціалізація команд:

Команда агента встановлюється випадково при ініціалізації:

```netlogo
create-shepherds num-shepherds
[ 
  ...
  set team random 2
  ifelse team = 0 [ set color red ] [ set color blue ]
]
```

Пастухи спочатку налаштовані збирати лише овець своєї команди.


### 2. Впровадження контрольованої крадіжки (Чужих овець)

Додана можливість збирати чужих овець, що контролюється перемикачем в інтерфейсі.

#### Логіка пошуку з урахуванням крадіжки:

В процедурі `to search-for-sheep` використовується глобальна булева змінна `allow-stealing?` (Switch), щоб визначити, чи може пастух підібрати вівцю, яка не належить до його команди:

```netlogo
to search-for-sheep
  ;; Пастух бере вівцю, якщо вона його команди АБО якщо крадіжка дозволена.
  set carried-sheep one-of sheep-here with [
    not hidden? and (team = [team] of myself or allow-stealing?)
  ]
  ...
end
```

#### Асиміляція овець:

У процедурі `to find-empty-spot`, коли пастух успішно скидає овець до нового стада, вівця змінює свою команду на команду пастуха, що її приніс (механізм асиміляції):

```netlogo
to find-empty-spot
  if all? sheep-here [hidden?]
  [
    ask carried-sheep
    [ 
      show-turtle
      ;; Асиміляція: вівця змінює команду на команду пастуха
      set team [team] of myself
      ...
    ]
    ...
  ]
end
```

### 3\. Додаткова ідея: Система Енергії та Втоми пастухів

Додано механізм, що імітує втому пастухів, змушуючи їх періодично відпочивати.

#### Управління станом та витратою енергії:

До `shepherds-own` додано `energy` та `resting?`. Енергія витрачається пропорційно до навантаження, а також візуалізується міткою:

```netlogo
shepherds-own
[
  ...
  energy           ;; рівень енергії (втома)
  resting?         ;; чи відпочиває пастух зараз
]
...
to go
  ask shepherds
  [ 
    set label floor energy ;; Візуалізація енергії
    ...
    ;; Витрата енергії
    ifelse carried-sheep = nobody 
      [ set energy energy - 1 ]
      [ set energy energy - 3 ] ;; Більша втрата при носінні вівці
    ...
  ]
  ...
end
```

#### Логіка відпочинку та кольору:

Якщо енергія падає нижче `5`, пастух переходить у стан відпочинку (`resting? = true`), стає сірим, припиняє рух (`stop`) та відновлює сили:

```netlogo
if energy < 5 [
  set resting? true
]

if resting? [
  set color gray
  set energy energy + 10  ;; Відновлення сил
  
  if energy >= 50 [
    set resting? false
    ;; Відновлення кольору після пробудження
    ifelse carried-sheep != nobody
      [ set color yellow ]
      [ ifelse team = 0 [ set color red ] [ set color blue ] ]
  ]
  
  stop
]
```
<img width="926" height="434" alt="image" src="https://github.com/user-attachments/assets/f44c7431-86f9-4d27-942e-850a29f62c9a" />

### Обчислювальні експерименти

### 1. Вплив розділення команд на ефективність

Експерименти проводились до 1500 тіків (довелось підняти через змінення швидкості збору), при 150 овець, швидкість руху 0.02, кількість пастухів змінювалась від 15 до 90 з кроком 15.  

| Кількість пастухів | Herding efficiency (%) |
|-|-|
| 15               | 71.4                 |
| 30               | 73.8                 |
| 45               | 74.9                 |
| 60               | 77                   |
| 75               | 76.1                 |
| 90               | 78.5                 |

<img width="542" height="435" alt="image" src="https://github.com/user-attachments/assets/8ddc8394-aeea-4629-aa5e-ee9e721e6b15" />

Висновок: Введення командної конкуренції (Червоні проти Синіх) у модель знизило загальну ефективність збору овець, оскільки пастухи не могли просто брати найближчу вівцю.

### 2. Вплив кількості овець на ефективність загону з врахування розділення команд

Кількість пастухів 60 (найефективніший результат з попереднього експерименту), швидкість овець 0.02, кількість овець змінювалась від 100 до 500 з кроком 100.  

| Кількість овець | Herding efficiency (%) |
|-|-|
| 100            | 81.6                 |
| 200            | 73.3                 |
| 300            | 59.7                 |
| 400            | 55                   |
| 500            | 53.7                 |

<img width="542" height="435" alt="image" src="https://github.com/user-attachments/assets/f5747a49-2974-426f-a51e-e72b74086a39" />

Висновок: За результатами експерименту видно, що розділення пастухів на дві команди істотно зменшує ефективність збору овець, бо кожна група збирає лише своїх, і загальна координація стає гіршою.

### 3. Вплив енергії на збір овець (з увімкнутим крадінням)

 Кількість овець 150, швидкість руху 0.02, кількість пастухів змінювалась від 15 до 90 з кроком 15.  

| Кількість пастухів | Herding efficiency (%) |
|-|-|
| 15               | 72.9                 |
| 30               | 77.3                 |
| 45               | 82.4                 |
| 60               | 85.1                 |
| 75               | 83.9                 |
| 90               | 89.8                 |

<img width="556" height="435" alt="image" src="https://github.com/user-attachments/assets/7c4275ce-2eb5-42fa-81ad-b7ee407537eb" />

Висновок: За результатами цього експерименту можна сказати, що порівняно з попередньою лабораторною роботою розбіжності невеликі, адже пастухи швидко відновлюють сили і продовжують ефективно збирати овець.
