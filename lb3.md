## Комп'ютерні системи імітаційного моделювання
## СПм-24-3, Лавровський Максим Валерійович
### Лабораторна робота №3. Використання засобів обчислювального интелекту для оптимізації імітаційних моделей


### Варіант 9, модель у середовищі NetLogo:
[Shepherds](http://www.netlogoweb.org/launch#http://www.netlogoweb.org/assets/modelslib/Sample%20Models/Biology/Shepherds.nlogo)


### Вербальний опис моделі:
Можливість зібрати вівцей в одну отару у цій симуляції залежить від кількості пастухів і швидкості їх руху в порівнянні з вівцями, які блукають безладно.

### Керуючі параметри:
- num-shepherds визначає загальну кількість пастухів на пасовищі.
- num-sheep визначає загальну кількість вівців на пасовищі.
- sheep-speed визначає швидкість руху вівці на кожному ігровому такті за умови, що її не переносить пастух.

### Внутрішні параметри:
- sheepless-neighborhoods показує скільки ділянок не мають овець на сусідніх ділянках.
- herding-efficiency вимірює, наскільки добре випасають овець.

### Показники роботи системи:
- на кожному такті симуляції вимірюється ефективність випасу вівцей. Ця ефективність визначається кількістю ділянок, які не мають вівцей у своєму оточенні. Чим більше вівцярі пасуть вівцей, тим більше ділянок повинно бути порожніми, що свідчить про вищу ефективність випасу.

<br>

### Налаштування середовища BehaviorSearch:

Обрана модель:
<pre>
D:\NetLogo\models\Sample Models\Biology\Shepherds.nlogox
</pre>
Параметри моделі (вкладка Model):  
Параметри та їх модливі діапазони були автоматично вилучені середовищем BehaviorSearch із вибраної імітаційної моделі:
<pre>
["num-sheep" [30 1 500]]
["num-shepherds" [1 1 100]]
["sheep-speed" [0 0.01 0.2]]
</pre>

Я вніс зміни до початкової кількості овець, порівняно зі значенням за замовчуванням, для забезпечення коректності симуляції. Це було необхідно, оскільки BehaviorSearch запропонував найкраще рішення при кількості овець, рівній нулю, що не відповідає реальному контексту симуляції.

Використовувана міра:  
Для фітнес-функції було обрано значення ефективності випасання овець, її значення для розрахунку взято з монітору, що представлений в імітаційной моделі в середовищі NetLogo  
<img width="1507" height="865" alt="image" src="https://github.com/user-attachments/assets/d868bd20-446b-4940-8301-fa37f2968713" />

та вказано у параметрі "Measure":
<pre>
herding-efficiency
</pre>

Значення ефективності випасання овець повинно братися максимальне за весь період симуляції тривалістю, 1000 тактів (адже на кожному такті є своє значення ефективності випасання), починаючи з 0 такту симуляції.  
 
Параметр зупинки за умовою ("Stop if") досягнення максимально можливої ефективності
<pre>
herding-efficiency = 100
</pre>
Загальний вигляд вкладки налаштувань параметрів моделі:  
<img width="1089" height="601" alt="image" src="https://github.com/user-attachments/assets/f8a05b4e-3159-4185-9322-cfd41c798a47" />

Налаштування цільової функції (вкладка Search Objective):  
Метою підбору параметрів імітаційної моделі, що описує ефективність випасу овець, є досягнення максимального значення ефективності. Це досягається шляхом налаштування параметрів моделі таким чином, щоб максимізувати значення ефективності. Ціль такого підбору вказана через параметр Goal, який встановлений на значення Maximize Fitness. Отже, метою є визначення параметрів, при яких ефективність випасу буде максимальною в певний момент симуляції. Середнє значення ефективності за всю тривалість симуляції (що складає 1000 кроків) не є цікавим. Для цього, в параметрі Collected measure, який визначає спосіб обліку значень обраного показника, встановлено значення MAX_ACROSS_STEPS. Це забезпечує обрахунок максимального значення ефективності у окремі моменти симуляції. Щоб уникнути спотворення результатів через випадковість, що властива логіці самої моделі, кожна симуляція повторюється 10 разів. Результат обчислюється як середнє арифметичне цих 10 повторних симуляцій.

Загальний вигляд вкладки налаштувань цільової функції:  
<img width="1187" height="627" alt="image" src="https://github.com/user-attachments/assets/2d63212c-d947-4c50-8d2e-3f01ca81ac6c" />


Налаштування алгоритму пошуку (вкладка Search Algorithm):  

У ході дослідження на лабораторній роботі використовуються два алгоритми: випадковий пошук(RandomSearch) і простий генетичний алгоритм (StandardGA).  

Загальний вид вкладки налаштувань алгоритму пошуку:  
<img width="1189" height="643" alt="image" src="https://github.com/user-attachments/assets/047529f7-6766-4446-87b9-a86c20897bf8" />


### Результати використання BehaviorSearch:
Результат пошуку параметрів імітаційної моделі, використовуючи генетичний алгоритм:

<img width="1187" height="781" alt="image" src="https://github.com/user-attachments/assets/cae821b5-615a-4367-b829-83a30673e922" />

Результат пошуку параметрів імітаційної моделі, використовуючи випадковий пошук:  
<img width="1311" height="858" alt="image" src="https://github.com/user-attachments/assets/008a7cde-06d2-4ca0-b015-eca1ffca6ceb" />


Ефективність алгоритмів: Генетичний алгоритм показав себе краще (96.0 проти 90.8). Він не просто перебирав варіанти, а оптимізував систему, використовуючи логіку "виживання найсильніших" рішень.

Обидва алгоритми зійшлися на майже ідентичній швидкості овець (0.12 та 0.13). Це свідчить про те, що це значення є об'єктивно оптимальним для даної моделі: вівці достатньо рухливі, щоб збиратися в групи, але не настільки швидкі, щоб тікати від пастухів.

Генетичний алгоритм краще "обдурив" систему. Фітнес-функція базується на порожніх ділянках. ГА знайшов спосіб залишити більше порожніх ділянок, просто зменшивши кількість овець до мінімуму (16 проти 39 у Random), при цьому збільшивши відносну кількість пастухів.

Стабільність: ГА демонструє більш стабільний поступальний рух до оптимуму, тоді як Random Search покладається на удачу. Якби простір пошуку був ширшим (більші діапазони параметрів), перевага ГА була б ще очевиднішою.

Висновки: Для задачі максимізації ефективності випасу (herding-efficiency) Генетичний алгоритм є значно кращим інструментом. Він зміг знайти специфічну конфігурацію параметрів (мала кількість овець + велика кількість пастухів + середня швидкість), яка гарантує найщільнішу отару.

<img width="1543" height="886" alt="image" src="https://github.com/user-attachments/assets/a6c55a3c-bbdb-4adf-88e4-14af68642589" />
